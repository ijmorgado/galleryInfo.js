/*!
 * galleryInfo.js 0.0.1
 * https://github.com/ijmorgado/galleryInfo.js
 */

(function(i){var t=function(){function t(i,t){this.imgEl=new Image,this.imgEl.onload=t,this.imgEl.src=i}return i.extend(t.prototype,{getImageAsJQuery:function(){return i(this.imgEl)}}),t}(),e=function(){function t(t,a,n){o.wrapper.opacity=t,$backdrop=i(e.wrapper).css(o.wrapper).attr("id","ui-giModal"+n),$footer=i(e.footer).css(o.footer),a&&this._createFooterTemplate(a),$backdrop.append($footer),i("body").append($backdrop),this.modal=new r(n)}var e={wrapper:'<div class="ui-giBackdrop"></div>',footer:'<div class="ui-giFooterBackdrop"></div>'},o={wrapper:{position:"fixed",backgroundColor:"#000",bottom:"0",left:"0",overflow:"hidden",position:"fixed",right:"0",top:"0",zIndex:"1099",display:"none"},footer:{background:"#0a0a0a",borderTop:"1px solid #181818",bottom:"0",height:"70",minWidth:"640",position:"fixed",width:"100%",zIndex:"110"}};return i.extend(t.prototype,{_createFooterTemplate:function(i){"string"==typeof i?$footer.html(i):$footer.append(i)},getModal:function(){return this.modal}}),t}(),r=function(){function e(t){this._setDimensions(),this._setStyle(),this._createControls(),that=this,$wrapper.append($imageDiv),$wrapper.append($infoDiv),i("div#ui-giModal"+t).append($wrapper),i(window).on("resize.gi-gallery",this._adjustToViewPort),i("#ui-giModal"+t).on("mouseenter.gi-gallery mouseleave.gi-gallery",".ui-giCtrl",this._hoverControls),i("#ui-giModal"+t).on("click.gi-gallery",".ui-giCloseGallery",{uniqueID:t},this._hideModal)}var r={wrapperGallery:'<div class="ui-giModalGallery"></div>',imageDiv:'<div class="ui-giImageDiv"></div>',infoDiv:'<div class="ui-giInfoDiv"></div>',leftCtrl:'<div class="ui-giCtrl ui-giCtrlleft"></div>',rightCtrl:'<div class="ui-giCtrl ui-giCtrlRight"></div>',closeCtrl:'<span class="ui-giCtrl ui-giCloseGallery"></span>'},o={wrapperGallery:{margin:"40px 40px 20px 40px"},imageDiv:{border:"1px solid #181818",backgroundColor:"#0A0A0A",display:"inline-block","float":"left"},infoDiv:{backgroundColor:"#FFFFFF",width:"275",display:"inline-block",marginLeft:"23px","-moz-border-radius":"2px","-webkit-border-radius":"2px",borderRadius:"2px"},leftCtrl:{width:"40",height:"auto",position:"absolute",top:"40",cursor:"pointer",left:"0"},rightCtrl:{width:"40",height:"auto",position:"absolute",top:"40",cursor:"pointer",right:"0"},arrowLeft:{width:"20",height:"20",display:"inline-block",marginLeft:"10px",background:"url(dist/img/controls.png) -55px 0px"},arrowRight:{width:"20",height:"20",display:"inline-block",marginLeft:"10px",background:"url(dist/img/controls.png) -38px 0px"},arrowLeftHover:{background:"url(dist/img/controls.png) -100px 0px"},arrowRightHover:{background:"url(dist/img/controls.png) -80px 0px"},closeCtrl:{width:"20",height:"20",display:"inline-block",background:"url(dist/img/controls.png) -20px 0px",position:"absolute",top:"15px",cursor:"pointer",right:"10px"},closeCtrlHover:{background:"url(dist/img/controls.png) 0px 0px"}};return i.extend(e.prototype,{_setDimensions:function(){o.wrapperGallery.width=i(window).width()-80,o.wrapperGallery.height=i(window).height()-130,o.imageDiv.width=o.wrapperGallery.width-300,o.imageDiv.height=o.wrapperGallery.height,o.infoDiv.height=o.wrapperGallery.height,o.leftCtrl.height=o.wrapperGallery.height,o.rightCtrl.height=o.wrapperGallery.height,o.arrowRight.marginTop=o.wrapperGallery.height/2-10+"px",o.arrowLeft.marginTop=o.wrapperGallery.height/2-10+"px"},_setStyle:function(){$wrapper=i(r.wrapperGallery).css(o.wrapperGallery),$imageDiv=i(r.imageDiv).css(o.imageDiv),$infoDiv=i(r.infoDiv).css(o.infoDiv)},_updateStyle:function(){i("div.ui-giModalGallery").css(o.wrapperGallery),i("div.ui-giImageDiv").css(o.imageDiv),i("div.ui-giInfoDiv").css(o.infoDiv),i("div.ui-giCtrlleft").css(o.leftCtrl),i("div.ui-giCtrlRight").css(o.rightCtrl),i("div.ui-giCtrlleft span").css(o.arrowLeft),i("div.ui-giCtrlRight span").css(o.arrowRight)},_createControls:function(){$spanArrowLeft=i(document.createElement("span")).css(o.arrowLeft),$spanArrowRight=i(document.createElement("span")).css(o.arrowRight),$leftCtrl=i(r.leftCtrl).css(o.leftCtrl).append($spanArrowLeft),$rightCtrl=i(r.rightCtrl).css(o.rightCtrl).append($spanArrowRight),$wrapper.append($leftCtrl).append($rightCtrl).append(i(r.closeCtrl).css(o.closeCtrl))},_adjustToViewPort:function(){that._setDimensions(),that._updateStyle()},_hoverControls:function(t){"mouseenter"===t.type?i(this).hasClass("ui-giCloseGallery")?i(this).css(o.closeCtrlHover):i(this).hasClass("ui-giCtrlleft")?i(this).children("span").css(o.arrowLeftHover):i(this).children("span").css(o.arrowRightHover):i(this).hasClass("ui-giCloseGallery")?i(this).css(o.closeCtrl):i(this).hasClass("ui-giCtrlleft")?i(this).children("span").css(o.arrowLeft):i(this).children("span").css(o.arrowRight)},_hideModal:function(t){i("#ui-giModal"+t.data.uniqueID).fadeOut(200)},show:function(t,e){$imageContainer=i("#ui-giModal"+e+" .ui-giImageDiv");var r=t.attr("href")||t.data("href");this._prepareImage(r,$imageContainer)},_prepareImage:function(e,r){doResize=this._doResize,imgEl=new t(e,function(){resized_image=doResize(this,r),r.contents().length>0?r.contents().replaceWith(i(resized_image)):r.append(i(resized_image)),r.parent().parent().show()})},_doResize:function(t,e){return $img=i(t),maxWidth=e.width()-2,maxHeight=e.height()-2,originalWidth=t.width,originalHeight=t.height,cssImg={},maxWidth>=originalWidth&&maxHeight>=originalHeight&&(cssImg={marginLeft:(maxWidth-originalWidth)/2,marginRight:(maxWidth-originalWidth)/2,marginTop:(maxHeight-originalHeight)/2,marginBottom:(maxHeight-originalHeight)/2}),$img.css(cssImg),$img}}),e}();(function(){var t={initialize:function(t){function r(){i(this).on("click.gi-gallery",{uniqueID:s},a)}function o(i,t,r){n=new e(i,t,r)}function a(t){t.preventDefault(),n&&n.getModal().show(i(this),t.data.uniqueID)}i(this);var n;0===this.length&&i.error("galleryInfo initialized without DOM element");var l=i.extend({infoPosition:"left",backdropOpacity:1,footerContent:null},t),s=(new Date).getTime();return i("#ui-giModal"+s).length||o(l.backdropOpacity,l.footerContent,s),i(this).children(".ui-giItem").each(r)},destroy:function(){}};jQuery.fn.galleryInfo=function(i){return t[i]?t[i].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)}})()})(window.jQuery);